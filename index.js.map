{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nconst fetchRequest = async (value, page) => {\n  const fetchTask = await axios.get(`https://pixabay.com/api/`, {\n    params: {\n      key: '46731058-8e313f89df23f954200132c0b',\n      q: value,\n      page,\n      per_page: 15,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n    },\n  });\n  return fetchTask.data;\n};\nexport default fetchRequest;\n","const drawMarkup = data => {\n  return data\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `\n    <li class=\"general-list-item\" >\n        <a href=\"${largeImageURL}\"><img src=\"${webformatURL}\" alt=\"${tags}\"></a>\n        <div>\n            <p class=\"general-list-item-p\" ><b>Likes</b><span>${likes}</span></p>\n            <p class=\"general-list-item-p\" ><b>Views</b><span>${views}</span></p>\n            <p class=\"general-list-item-p\" ><b>Comments</b><span>${comments}</span></p>\n            <p class=\"general-list-item-p\" ><b>Downloads</b><span>${downloads}</span></p>\n        </div>\n    </li>\n    `;\n      }\n    )\n    .join('');\n};\nexport default drawMarkup;\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport fetchRequest from './js/pixabay-api';\nimport drawMarkup from './js/render-functions';\n\nconst main = document.querySelector('main');\nconst searchForm = document.forms.searchForm;\nconst inp = searchForm.elements.input;\nconst submitBtn = searchForm.elements.submitButton;\nconst outputList = document.querySelector('.general-list');\n\nconst moreBtn = document.querySelector('button[data-more]');\nconst loader = document.createElement('span');\nloader.classList.add('loader');\nconst elemsPerPage = 15;\nlet pageNumber;\nlet inpVal;\n\nasync function handleRequest(value, page) {\n  main.append(loader);\n  moreBtn.hidden = true;\n  const photosArr = await fetchRequest(value, page);\n  loader.remove();\n  if (!photosArr.hits.length) {\n    throw new Error(\n      'Sorry, there are no images matching your search query. Please, try again'\n    );\n  }\n\n  const markup = drawMarkup(photosArr.hits);\n  if (page === 1) outputList.innerHTML = markup;\n  else outputList.insertAdjacentHTML('beforeend', markup);\n  lightboxGallery.refresh();\n\n  if (page * elemsPerPage >= photosArr.totalHits) {\n    throw new Error(\n      \"We're sorry, but you've reached the end of search results.\"\n    );\n  }\n  moreBtn.hidden = false;\n  pageNumber += 1;\n}\n\nsubmitBtn.addEventListener('click', async e => {\n  e.preventDefault();\n  inpVal = inp.value.trim();\n  if (!inpVal) {\n    return;\n  }\n  submitBtn.disabled = true;\n  pageNumber = 1;\n  try {\n    await handleRequest(inpVal, pageNumber);\n  } catch (error) {\n    outputList.innerHTML = '';\n    iziToast.error({\n      message: error.message,\n      position: 'topRight',\n    });\n  } finally {\n    submitBtn.disabled = false;\n  }\n});\n\nmoreBtn.addEventListener('click', async () => {\n  submitBtn.disabled = true;\n  try {\n    await handleRequest(inpVal, pageNumber);\n    const listElemHeight = document\n      .querySelector('.general-list-item')\n      .getBoundingClientRect().height;\n    scrollBy({ top: listElemHeight * 2 + 32, behavior: 'smooth' });\n  } catch (error) {\n    iziToast.info({\n      message: error.message,\n      position: 'topRight',\n    });\n  } finally {\n    submitBtn.disabled = false;\n  }\n});\nconst lightboxGallery = new SimpleLightbox('.general-list a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n"],"names":["fetchRequest","value","page","axios","drawMarkup","data","webformatURL","largeImageURL","tags","likes","views","comments","downloads","main","searchForm","inp","submitBtn","outputList","moreBtn","loader","elemsPerPage","pageNumber","inpVal","handleRequest","photosArr","markup","lightboxGallery","e","error","iziToast","listElemHeight","SimpleLightbox"],"mappings":"owBACA,MAAMA,EAAe,MAAOC,EAAOC,KACf,MAAMC,EAAM,IAAI,2BAA4B,CAC5D,OAAQ,CACN,IAAK,qCACL,EAAGF,EACH,KAAAC,EACA,SAAU,GACV,WAAY,QACZ,YAAa,aACb,WAAY,EACb,CACL,CAAG,GACgB,KCbbE,EAAaC,GACVA,EACJ,IACC,CAAC,CACC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IACe;AAAA;AAAA,mBAEIL,CAAa,eAAeD,CAAY,UAAUE,CAAI;AAAA;AAAA,gEAETC,CAAK;AAAA,gEACLC,CAAK;AAAA,mEACFC,CAAQ;AAAA,oEACPC,CAAS;AAAA;AAAA;AAAA,KAKxE,EACA,KAAK,EAAE,EClBNC,EAAO,SAAS,cAAc,MAAM,EACpCC,EAAa,SAAS,MAAM,WAC5BC,EAAMD,EAAW,SAAS,MAC1BE,EAAYF,EAAW,SAAS,aAChCG,EAAa,SAAS,cAAc,eAAe,EAEnDC,EAAU,SAAS,cAAc,mBAAmB,EACpDC,EAAS,SAAS,cAAc,MAAM,EAC5CA,EAAO,UAAU,IAAI,QAAQ,EAC7B,MAAMC,EAAe,GACrB,IAAIC,EACAC,EAEJ,eAAeC,EAActB,EAAOC,EAAM,CACxCW,EAAK,OAAOM,CAAM,EAClBD,EAAQ,OAAS,GACjB,MAAMM,EAAY,MAAMxB,EAAaC,EAAOC,CAAI,EAEhD,GADAiB,EAAO,OAAM,EACT,CAACK,EAAU,KAAK,OAClB,MAAM,IAAI,MACR,0EACN,EAGE,MAAMC,EAASrB,EAAWoB,EAAU,IAAI,EAKxC,GAJItB,IAAS,EAAGe,EAAW,UAAYQ,EAClCR,EAAW,mBAAmB,YAAaQ,CAAM,EACtDC,EAAgB,QAAO,EAEnBxB,EAAOkB,GAAgBI,EAAU,UACnC,MAAM,IAAI,MACR,4DACN,EAEEN,EAAQ,OAAS,GACjBG,GAAc,CAChB,CAEAL,EAAU,iBAAiB,QAAS,MAAMW,GAAK,CAG7C,GAFAA,EAAE,eAAc,EAChBL,EAASP,EAAI,MAAM,OACf,EAACO,EAGL,CAAAN,EAAU,SAAW,GACrBK,EAAa,EACb,GAAI,CACF,MAAME,EAAcD,EAAQD,CAAU,CACvC,OAAQO,EAAO,CACdX,EAAW,UAAY,GACvBY,EAAS,MAAM,CACb,QAASD,EAAM,QACf,SAAU,UAChB,CAAK,CACL,QAAY,CACRZ,EAAU,SAAW,EACtB,EACH,CAAC,EAEDE,EAAQ,iBAAiB,QAAS,SAAY,CAC5CF,EAAU,SAAW,GACrB,GAAI,CACF,MAAMO,EAAcD,EAAQD,CAAU,EACtC,MAAMS,EAAiB,SACpB,cAAc,oBAAoB,EAClC,sBAAqB,EAAG,OAC3B,SAAS,CAAE,IAAKA,EAAiB,EAAI,GAAI,SAAU,QAAQ,CAAE,CAC9D,OAAQF,EAAO,CACdC,EAAS,KAAK,CACZ,QAASD,EAAM,QACf,SAAU,UAChB,CAAK,CACL,QAAY,CACRZ,EAAU,SAAW,EACtB,CACH,CAAC,EACD,MAAMU,EAAkB,IAAIK,EAAe,kBAAmB,CAC5D,aAAc,MACd,aAAc,GAChB,CAAC"}