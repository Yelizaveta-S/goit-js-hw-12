{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nconst fetchRequest = async (value, page) => {\n  const fetchTask = await axios.get(`https://pixabay.com/api/`, {\n    params: {\n      key: '46731058-8e313f89df23f954200132c0b',\n      q: value,\n      page,\n      per_page: 15,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n    },\n  });\n  return fetchTask.data;\n};\nexport default fetchRequest;\n","const drawMarkup = data => {\n  return data\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `\n    <li class=\"general-list-item\" >\n        <a href=\"${largeImageURL}\"><img src=\"${webformatURL}\" alt=\"${tags}\"></a>\n        <div>\n            <p class=\"general-list-item-p\" ><b>Likes</b><span>${likes}</span></p>\n            <p class=\"general-list-item-p\" ><b>Views</b><span>${views}</span></p>\n            <p class=\"general-list-item-p\" ><b>Comments</b><span>${comments}</span></p>\n            <p class=\"general-list-item-p\" ><b>Downloads</b><span>${downloads}</span></p>\n        </div>\n    </li>\n    `;\n      }\n    )\n    .join('');\n};\nexport default drawMarkup;\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport fetchRequest from './js/pixabay-api';\nimport drawMarkup from './js/render-functions';\n\nconst main = document.querySelector('main');\nconst searchForm = document.forms.searchForm;\nconst inp = searchForm.elements.input;\nconst submitBtn = searchForm.elements.submitButton;\nconst outputList = document.querySelector('.general-list');\nconst moreBtn = document.querySelector('button[data-more]');\nconst loader = document.getElementById('loader');\nconst elemsPerPage = 15;\nlet pageNumber;\nlet inpVal;\n\nfunction showLoader() {\n  loader.classList.remove('hidden');\n}\n\nfunction hideLoader() {\n  loader.classList.add('hidden');\n}\n\nasync function handleRequest(value, page) {\n  showLoader();\n  moreBtn.hidden = true;\n\n  try {\n    const photosArr = await fetchRequest(value, page);\n    if (!photosArr.hits.length) {\n      throw new Error(\n        'Sorry, there are no images matching your search query. Please, try again'\n      );\n    }\n\n    const markup = drawMarkup(photosArr.hits);\n    if (page === 1) outputList.innerHTML = markup;\n    else outputList.insertAdjacentHTML('beforeend', markup);\n\n    lightboxGallery.refresh();\n\n    // Перевіряємо, чи потрібно показувати кнопку \"Load more\"\n    if (page * elemsPerPage >= photosArr.totalHits) {\n      moreBtn.hidden = true;\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n    } else {\n      moreBtn.hidden = false;\n      pageNumber += 1;\n    }\n  } finally {\n    hideLoader();\n  }\n}\n\nsubmitBtn.addEventListener('click', async (e) => {\n  e.preventDefault();\n  inpVal = inp.value.trim();\n  if (!inpVal) return;\n\n  submitBtn.disabled = true;\n  pageNumber = 1;\n  outputList.innerHTML = ''; // Очищаємо попередні результати\n\n  try {\n    await handleRequest(inpVal, pageNumber);\n  } catch (error) {\n    iziToast.error({\n      message: error.message,\n      position: 'topRight',\n    });\n  } finally {\n    submitBtn.disabled = false;\n  }\n});\n\nmoreBtn.addEventListener('click', async () => {\n  submitBtn.disabled = true;\n  try {\n    await handleRequest(inpVal, pageNumber);\n    const listElemHeight = document\n      .querySelector('.general-list-item')\n      .getBoundingClientRect().height;\n    scrollBy({ top: listElemHeight * 2 + 32, behavior: 'smooth' });\n  } catch (error) {\n    iziToast.info({\n      message: error.message,\n      position: 'topRight',\n    });\n  } finally {\n    submitBtn.disabled = false;\n  }\n});\n\nconst lightboxGallery = new SimpleLightbox('.general-list a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n"],"names":["fetchRequest","value","page","axios","drawMarkup","data","webformatURL","largeImageURL","tags","likes","views","comments","downloads","searchForm","inp","submitBtn","outputList","moreBtn","loader","elemsPerPage","pageNumber","inpVal","showLoader","hideLoader","handleRequest","photosArr","markup","lightboxGallery","iziToast","e","error","listElemHeight","SimpleLightbox"],"mappings":"owBACA,MAAMA,EAAe,MAAOC,EAAOC,KACf,MAAMC,EAAM,IAAI,2BAA4B,CAC5D,OAAQ,CACN,IAAK,qCACL,EAAGF,EACH,KAAAC,EACA,SAAU,GACV,WAAY,QACZ,YAAa,aACb,WAAY,EACb,CACL,CAAG,GACgB,KCbbE,EAAaC,GACVA,EACJ,IACC,CAAC,CACC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IACe;AAAA;AAAA,mBAEIL,CAAa,eAAeD,CAAY,UAAUE,CAAI;AAAA;AAAA,gEAETC,CAAK;AAAA,gEACLC,CAAK;AAAA,mEACFC,CAAQ;AAAA,oEACPC,CAAS;AAAA;AAAA;AAAA,KAKxE,EACA,KAAK,EAAE,EClBC,SAAS,cAAc,MAAM,EAC1C,MAAMC,EAAa,SAAS,MAAM,WAC5BC,EAAMD,EAAW,SAAS,MAC1BE,EAAYF,EAAW,SAAS,aAChCG,EAAa,SAAS,cAAc,eAAe,EACnDC,EAAU,SAAS,cAAc,mBAAmB,EACpDC,EAAS,SAAS,eAAe,QAAQ,EACzCC,EAAe,GACrB,IAAIC,EACAC,EAEJ,SAASC,GAAa,CACpBJ,EAAO,UAAU,OAAO,QAAQ,CAClC,CAEA,SAASK,GAAa,CACpBL,EAAO,UAAU,IAAI,QAAQ,CAC/B,CAEA,eAAeM,EAAcvB,EAAOC,EAAM,CACxCoB,IACAL,EAAQ,OAAS,GAEjB,GAAI,CACF,MAAMQ,EAAY,MAAMzB,EAAaC,EAAOC,CAAI,EAChD,GAAI,CAACuB,EAAU,KAAK,OAClB,MAAM,IAAI,MACR,0EACR,EAGI,MAAMC,EAAStB,EAAWqB,EAAU,IAAI,EACpCvB,IAAS,EAAGc,EAAW,UAAYU,EAClCV,EAAW,mBAAmB,YAAaU,CAAM,EAEtDC,EAAgB,QAAO,EAGnBzB,EAAOiB,GAAgBM,EAAU,WACnCR,EAAQ,OAAS,GACjBW,EAAS,KAAK,CACZ,QAAS,6DACT,SAAU,UAClB,CAAO,IAEDX,EAAQ,OAAS,GACjBG,GAAc,EAEpB,QAAY,CACRG,GACD,CACH,CAEAR,EAAU,iBAAiB,QAAS,MAAOc,GAAM,CAG/C,GAFAA,EAAE,eAAc,EAChBR,EAASP,EAAI,MAAM,OACf,EAACO,EAEL,CAAAN,EAAU,SAAW,GACrBK,EAAa,EACbJ,EAAW,UAAY,GAEvB,GAAI,CACF,MAAMQ,EAAcH,EAAQD,CAAU,CACvC,OAAQU,EAAO,CACdF,EAAS,MAAM,CACb,QAASE,EAAM,QACf,SAAU,UAChB,CAAK,CACL,QAAY,CACRf,EAAU,SAAW,EACtB,EACH,CAAC,EAEDE,EAAQ,iBAAiB,QAAS,SAAY,CAC5CF,EAAU,SAAW,GACrB,GAAI,CACF,MAAMS,EAAcH,EAAQD,CAAU,EACtC,MAAMW,EAAiB,SACpB,cAAc,oBAAoB,EAClC,sBAAqB,EAAG,OAC3B,SAAS,CAAE,IAAKA,EAAiB,EAAI,GAAI,SAAU,QAAQ,CAAE,CAC9D,OAAQD,EAAO,CACdF,EAAS,KAAK,CACZ,QAASE,EAAM,QACf,SAAU,UAChB,CAAK,CACL,QAAY,CACRf,EAAU,SAAW,EACtB,CACH,CAAC,EAED,MAAMY,EAAkB,IAAIK,EAAe,kBAAmB,CAC5D,aAAc,MACd,aAAc,GAChB,CAAC"}